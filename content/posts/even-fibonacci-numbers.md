---
title: "Finding sum of even Fibonacci numbers" 
date: 2022-09-20T20:34:25+02:00
tags: [ "programming", "puzzles" ]
---

It's the problem from [Project Euler #2](https://projecteuler.net/problem=2), which I have solved many years ago but never documented it properly. 
The problem states 
>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:        
>&nbsp;&nbsp;&nbsp;&nbsp; **1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...**    
>By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.


To solve $ \sum fib_{even}(n) $ problem, the pattern of the even numbers in fibonacci sequence need to be understood first. Since the first two numbers of fibonacci sequeunce are odd and even numbers, the third and fourth numbers will also be odd number because summation of an even and odd number will always be an odd number. After that, we will have two odd numbers which will resulted in even number and sequene will go on. In other words, it can be said that each even number will be surround by two consecutive odd numbers as shown below:     

| Odd | Even | Odd | Odd | Even | Odd | Odd | Even | Odd | Odd | Even |.. |
|:---:|:----:|:---:|:---:|:----:|:---:|:---:|:----:|:---:|:---:|:----:|---|
| 1   | 2    | 3   | 5   | 8    | 13  | 21  | 34   | 55  | 89  | 144  |.. |
        
\
Mathematically it can be written as:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{even}(n) = fib_{odd}(n-1) + fib_{odd}(n-2) $       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{odd}(n) = fib_{even}(n-1) + fib_{odd}(n-2) $  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{odd}(n) = fib_{odd}(n-1) + fib_{even}(n-2) $     

By using this facts we can describe the relationship of current even number to its previous even number which we can then later use this to calculate the sum of all even fibonacci numbers under four million.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{even}(n) = (fib_{odd}(n-1) + fib_{even}(n-2) ) + fib_{even}(n-2) $          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{even}(n) = fib_{odd}(n-2) + 2 \times fib_{even}(n-2) $       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ fib_{even}(n) - 2 \times fib_{even}(n-2) = fib_{odd}(n-2) $    

The solution of $ \sum fib_{even}(n) $ is given below in python 

```python
odd = 1
even = 2
sum = 0
while even <= 4000000:
    sum += even
    odd = 2*even + odd
    even = 2*odd - even   
        
print("sum", s)
```
