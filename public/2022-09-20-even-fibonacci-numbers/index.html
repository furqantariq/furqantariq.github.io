<html>
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Document</title>
</head>
<body>
     <div style="text-align: center; height: 75px; padding:1px;   text-transform:capitalize; background-color:#42a5f5; color:white">
     <h1 style="margin-bottom:-10px; "><a style="text-decoration: none; color:white;"href="/">Single Template - page</a></h1>
</div>

     <div style="margin:25px;">
          <h1>Finding sum of even Fibonacci numbers</h1>
          <div style="color:grey; font-size:16px;">Tuesday, Sep 20, 2022</div>
          <div style="color:grey; font-size:16px;"></div>
          <div style="font-size:18px;"><p>It&rsquo;s the problem from <a href="https://projecteuler.net/problem=2">Project Euler #2</a>, which I have <a href="https://github.com/furqantariq/Project-Euler/tree/master/p2">solved</a> couple of years ago but never properly documented it.
The problem states</p>
<blockquote>
<p>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:     <br>
     <strong>1, 2, 3, 5, 8, 13, 21, 34, 55, 89, &hellip;</strong> <br>
By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.</p>
</blockquote>
<p>To solve this problem, the pattern of the even numbers in fibonacci sequence need to be understood first. Since the first two numbers of fibonacci sequeunce are odd and even number, so the both third and fourth numbers will be odd numbers because summation of an even and odd number will always be an odd number. After that, these two odd numbers will be resulted in an even number and sequene will go on. In other words, it can be said that each even number will always be surrounded by two consecutive odd numbers and positioned at \(2k+3\) for any \(k\) in a sequence as shown below:</p>
<table>
<thead>
<tr>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">..</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">5</td>
<td style="text-align:center">8</td>
<td style="text-align:center">13</td>
<td style="text-align:center">21</td>
<td style="text-align:center">34</td>
<td style="text-align:center">55</td>
<td style="text-align:center">89</td>
<td style="text-align:center">144</td>
<td style="text-align:center">..</td>
</tr>
</tbody>
</table>
<p><br>
Mathematically it can be written in the form of <a href="https://en.wikipedia.org/wiki/Recurrence_relation">recursive relation</a> \( f \) where \( n \) is the \( nth \) fibonacci number.</p>
<p>$$\begin{align}
f_{(odd)}(1) &amp;= 1 \[2ex]
f_{(even)}(2) &amp;= 2 \[2ex]
\end{align}$$</p>
<p>$$\begin{align}
f_{(even)}(n) &amp;= f_{(odd)}(n-1) + f_{(odd)}(n-2) \[2ex]
f_{(odd)}(n) &amp;= f_{(even)}(n-1) + f_{(odd)}(n-2) \text{ or } f_{(odd)}(n-1) + f_{(even)}(n-2) \[2ex]
\end{align}$$</p>
<p>And then the next even number will be</p>
<p>$$ f_{(even)}(n+1) = f_{(odd)}(n) + f_{(odd)}(n-1) $$</p>
<p>The above equation can also be desribed in terms of its relation with its predecessor even fibonacci number, that will save us some iterations in calculating sum. We can do this by expanding the \( f_{(odd)}(n-1) \).</p>
<p>$$\begin{align}
f_{(even)}(n+1) &amp;= f_{(odd)}(n) + ( f_{(odd)}(n) - f_{(even)}(n-2)) \[2ex]            <br>
f_{(even)}(n+1) &amp;= 2 \times f_{(odd)}(n) - f_{(even)}(n-2) \[2ex]
\end{align}$$</p>
<p>From the above equation we have everything what we need to calculate sum except \( f_{(odd)}(n) \). Instead what we have is \( f_{(odd)}(n-3) \), that can be used to calculate \( f_{(odd)}(n) \) as shown below.</p>
<p>$$\begin{align}
f_{(odd)}(n) &amp;= f_{(odd)}(n-1) + f_{(even)}(n-2) \[2ex]
f_{(odd)}(n) &amp;= (f_{(even)}(n-2) + f_{(odd)}(n-3) ) + f_{(even)}(n-2) \[2ex]    <br>
f_{(odd)}(n) &amp;= 2 \times f_{(even)}(n-2) + f_{(odd)}(n-3) \[2ex]
\end{align}$$</p>
<p>And now finally the summation will look like this</p>
<p>$$ \sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = \sum_{n=2k+3}^{f(n+1)\le 4000000} 2 \times f(n) - f(n-3) $$</p>
<p>Here \( n=2k+3 \) means that \( (n+1)th \) number will point to the position of even number in fibonacci sequeunce. <em>e.g.</em> 2, 5, 8, 10 ..</p>
<p>Lets calculate the first three even fibonacci numbers to test our equations</p>
<table>
<thead>
<tr>
<th style="text-align:center">\( k \)</th>
<th style="text-align:center">\( n \)</th>
<th style="text-align:center">\( f(n) \) odd number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">\( f(1) = 1 \) <em>(base)</em></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">\( f(4)=2 \times f(2) + f(1) = (2 \times 2) + 1 = 5 \)</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">7</td>
<td style="text-align:center">\( f(7)=2 \times f(5) + f(4) = (2 \times 8) + 5 = 21 \)</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">9</td>
<td style="text-align:center">\( f(9)=2 \times f(8) + f(7) = (2 \times 34) + 21 = 89 \)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">\( k \)</th>
<th style="text-align:center">\( n \)</th>
<th style="text-align:center">\( f(n+1) \) even number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">\( f(2) = 2 \) <em>(base)</em></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">\( f(5)=2 \times f(4) - f(2) = (2 \times 5) - 2 = 8 \)</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">7</td>
<td style="text-align:center">\( f(8)=2 \times f(7) - f(5) = (2 \times 21) - 8 = 34 \)</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">9</td>
<td style="text-align:center">\( f(10)=2 \times f(9) - f(8) = (2 \times 89) - 34 = 144 \)</td>
</tr>
</tbody>
</table>
<p><br>
Here is the complete solution in Python</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># recurrence base condition</span>
</span></span><span style="display:flex;"><span>odd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>even <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># initialize sum to zero</span>
</span></span><span style="display:flex;"><span>sum <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># loop until even number is less than or equal to 4 million </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> even <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">4000000</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># add even number to sum</span>
</span></span><span style="display:flex;"><span>    sum <span style="color:#f92672">+=</span> even
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># calculate next odd number and even number and</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># reassign those values to existing variables</span>
</span></span><span style="display:flex;"><span>    odd <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>even <span style="color:#f92672">+</span> odd
</span></span><span style="display:flex;"><span>    even <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>odd <span style="color:#f92672">-</span> even   
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print sum to the screen</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;sum=&#34;</span>, sum)
</span></span></code></pre></div><p>And the result is:</p>
<p>$$ \sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = 4613732 $$</p>
</div>
     </div>
     <div style="height:35px;"></div>
<div style=" position:fixed; color: white; height:35px; background-color:#757575; bottom:0px; text-align:center; width:99%">
     <p style="margin:10px; "><a style="color: white; " target="_blank" href="http://www.giraffeacademy.com/">Giraffe Academy</a> - Hugo Theme</p>
</div>

</body>
</html>