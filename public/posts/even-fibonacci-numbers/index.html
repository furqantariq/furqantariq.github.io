<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Finding sum of even Fibonacci numbers | furqan</title>
  <link rel = 'canonical' href = 'http://localhost:1313/posts/even-fibonacci-numbers/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Finding sum of even Fibonacci numbers" />
<meta property="og:description" content="It&rsquo;s the problem from Project Euler #2, which I have solved couple of years ago but never properly documented it. The problem states
Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, &hellip; By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/even-fibonacci-numbers/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-20T20:34:25+02:00" />
<meta property="article:modified_time" content="2022-09-20T20:34:25+02:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Finding sum of even Fibonacci numbers"/>
<meta name="twitter:description" content="It&rsquo;s the problem from Project Euler #2, which I have solved couple of years ago but never properly documented it. The problem states
Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, &hellip; By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms."/>

  
  
  
  <link rel="stylesheet" href="http://localhost:1313/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="http://localhost:1313/images/favicon.ico" />

  
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>
  </head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="http://localhost:1313/">
  
    <div id="logo" style="background-image: url(http://localhost:1313/images/logo.png)"></div>
  
  <div id="title">
    <h1>furqan</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x" aria-hidden="true"></i></a>
      </li>
      
        <li><a href="/">blog</a></li>
      
        <li><a href="/twitch">twitch</a></li>
      
    </ul>
  </div>
</header>



    
  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Finding sum of even Fibonacci numbers
      </h1>
      <div class="meta">
        <div class="postdate">
          
          <time datetime="2022-09-20 20:34:25 &#43;0200 CEST" itemprop="datePublished">2022-09-20</time>
          
        </div>
      </div>
    </header>

    
    <div class="content" itemprop="articleBody">
      <p>It&rsquo;s the problem from <a href="https://projecteuler.net/problem=2">Project Euler #2</a>, which I have <a href="https://github.com/furqantariq/Project-Euler/tree/master/p2">solved</a> couple of years ago but never properly documented it.
The problem states</p>
<blockquote>
<p>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:     <br>
     <strong>1, 2, 3, 5, 8, 13, 21, 34, 55, 89, &hellip;</strong> <br>
By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.</p>
</blockquote>
<p>To solve this problem, the pattern of the even numbers in fibonacci sequence need to be understood first. Since the first two numbers of fibonacci sequeunce are odd and even number, so the both third and fourth numbers will be odd numbers because summation of an even and odd number will always be an odd number. After that, these two odd numbers will be resulted in an even number and sequene will go on. In other words, it can be said that each even number will always be surrounded by two consecutive odd numbers and positioned at \(2k+3\) for any \(k\) in a sequence as shown below:</p>
<table>
<thead>
<tr>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">O</th>
<th style="text-align:center">O</th>
<th style="text-align:center">E</th>
<th style="text-align:center">..</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">2</td>
<td style="text-align:center">3</td>
<td style="text-align:center">5</td>
<td style="text-align:center">8</td>
<td style="text-align:center">13</td>
<td style="text-align:center">21</td>
<td style="text-align:center">34</td>
<td style="text-align:center">55</td>
<td style="text-align:center">89</td>
<td style="text-align:center">144</td>
<td style="text-align:center">..</td>
</tr>
</tbody>
</table>
<p><br>
Mathematically it can be written in the form of <a href="https://en.wikipedia.org/wiki/Recurrence_relation">recursive relation</a> \( f \) where \( n \) is the \( nth \) fibonacci number.</p>
$$\begin{align} 
f_{(odd)}(1) &= 1 \\[2ex]
f_{(even)}(2) &= 2 \\[2ex]
\end{align}$$
$$\begin{align} 
f_{(even)}(n) &= f_{(odd)}(n-1) + f_{(odd)}(n-2) \\[2ex]
f_{(odd)}(n) &= f_{(even)}(n-1) + f_{(odd)}(n-2) \text{ or } f_{(odd)}(n-1) + f_{(even)}(n-2) \\[2ex]
\end{align}$$
<p>And then the next even number will be</p>
$$ f_{(even)}(n+1) = f_{(odd)}(n) + f_{(odd)}(n-1) $$
<p>The above equation can also be desribed in terms of its relation with its predecessor even fibonacci number, that will save us some iterations in calculating sum. We can do this by expanding the \( f_{(odd)}(n-1) \).</p>
$$\begin{align}
f_{(even)}(n+1) &= f_{(odd)}(n) + ( f_{(odd)}(n) - f_{(even)}(n-2)) \\[2ex]               
f_{(even)}(n+1) &= 2 \times f_{(odd)}(n) - f_{(even)}(n-2) \\[2ex]
\end{align}$$
<p>From the above equation we have everything what we need to calculate sum except \( f_{(odd)}(n) \). Instead what we have is \( f_{(odd)}(n-3) \), that can be used to calculate \( f_{(odd)}(n) \) as shown below.</p>
$$\begin{align} 
f_{(odd)}(n) &= f_{(odd)}(n-1) + f_{(even)}(n-2) \\[2ex]
f_{(odd)}(n) &= (f_{(even)}(n-2) + f_{(odd)}(n-3) ) + f_{(even)}(n-2) \\[2ex]       
f_{(odd)}(n) &= 2 \times f_{(even)}(n-2) + f_{(odd)}(n-3) \\[2ex]
\end{align}$$
<p>And now finally the summation will look like this</p>
$$ \sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = \sum_{n=2k+3}^{f(n+1)\le 4000000} 2 \times f(n) - f(n-3) $$
<p>Here \( n=2k+3 \) means that \( (n+1)th \) number will point to the position of even number in fibonacci sequeunce. <em>e.g.</em> 2, 5, 8, 10 ..</p>
<p>Lets calculate the first three even fibonacci numbers to test our equations</p>
<table>
<thead>
<tr>
<th style="text-align:center">\( k \)</th>
<th style="text-align:center">\( n \)</th>
<th style="text-align:center">\( f(n) \) odd number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">\( f(1) = 1 \) <em>(base)</em></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">\( f(4)=2 \times f(2) + f(1) = (2 \times 2) + 1 = 5 \)</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">7</td>
<td style="text-align:center">\( f(7)=2 \times f(5) + f(4) = (2 \times 8) + 5 = 21 \)</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">9</td>
<td style="text-align:center">\( f(9)=2 \times f(8) + f(7) = (2 \times 34) + 21 = 89 \)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">\( k \)</th>
<th style="text-align:center">\( n \)</th>
<th style="text-align:center">\( f(n+1) \) even number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">\( f(2) = 2 \) <em>(base)</em></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">4</td>
<td style="text-align:center">\( f(5)=2 \times f(4) - f(2) = (2 \times 5) - 2 = 8 \)</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">7</td>
<td style="text-align:center">\( f(8)=2 \times f(7) - f(5) = (2 \times 21) - 8 = 34 \)</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">9</td>
<td style="text-align:center">\( f(10)=2 \times f(9) - f(8) = (2 \times 89) - 34 = 144 \)</td>
</tr>
</tbody>
</table>
<p><br>
Here is the complete solution in Python</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># recurrence base condition</span>
</span></span><span style="display:flex;"><span>odd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>even <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># initialize sum to zero</span>
</span></span><span style="display:flex;"><span>sum <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># loop until even number is less than or equal to 4 million </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> even <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">4000000</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># add even number to sum</span>
</span></span><span style="display:flex;"><span>    sum <span style="color:#f92672">+=</span> even
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># calculate next odd number and even number and</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># reassign those values to existing variables</span>
</span></span><span style="display:flex;"><span>    odd <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>even <span style="color:#f92672">+</span> odd
</span></span><span style="display:flex;"><span>    even <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>odd <span style="color:#f92672">-</span> even   
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print sum to the screen</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;sum=&#34;</span>, sum)
</span></span></code></pre></div><p>And the result is:</p>
$$ \sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = 4613732 $$

    </div>
  </article>

  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  furqan 
  </div>
</footer>




    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  furqan 
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
