<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Finding sum of even Fibonacci numbers | amoebatron</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Finding sum of even Fibonacci numbers" />
<meta name="author" content="Furqan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s the problem from Project Euler #2, which I have solved couple of years ago but never properly documented it. The problem states Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:      1, 2, 3, 5, 8, 13, 21, 34, 55, 89, … By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms." />
<meta property="og:description" content="It’s the problem from Project Euler #2, which I have solved couple of years ago but never properly documented it. The problem states Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:      1, 2, 3, 5, 8, 13, 21, 34, 55, 89, … By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms." />
<link rel="canonical" href="http://localhost:4000/2022/09/20/even-fibonacci-numbers.html" />
<meta property="og:url" content="http://localhost:4000/2022/09/20/even-fibonacci-numbers.html" />
<meta property="og:site_name" content="amoebatron" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-20T20:34:25+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Finding sum of even Fibonacci numbers" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Furqan"},"dateModified":"2022-09-20T20:34:25+02:00","datePublished":"2022-09-20T20:34:25+02:00","description":"It’s the problem from Project Euler #2, which I have solved couple of years ago but never properly documented it. The problem states Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:      1, 2, 3, 5, 8, 13, 21, 34, 55, 89, … By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.","headline":"Finding sum of even Fibonacci numbers","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2022/09/20/even-fibonacci-numbers.html"},"url":"http://localhost:4000/2022/09/20/even-fibonacci-numbers.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="amoebatron" />


<link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/favicons/site.webmanifest">
<link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<meta property="og:image" content="https://furqantariq.github.io/assets/img/share.gif">
<meta property="og:image:height" content="335">
<meta property="og:image:width" content="640">
<meta property="og:title" content="amoebatron's personal blog">
<meta property="og:description" content="">
<meta property="og:url" content="https://furqantariq.github.io">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script>
MathJax = {
  tex: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEnvironments: true
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>


</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">amoebatron</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/twitch/">Twitch</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Finding sum of even Fibonacci numbers</h1>
    <p class="post-meta"><time class="dt-published" datetime="2022-09-20T20:34:25+02:00" itemprop="datePublished">
        Sep 20, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>It’s the problem from <a href="https://projecteuler.net/problem=2">Project Euler #2</a>, which I have <a href="https://github.com/furqantariq/Project-Euler/tree/master/p2">solved</a> couple of years ago but never properly documented it. 
The problem states</p>
<blockquote>
  <p>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:      <br />
     <strong>1, 2, 3, 5, 8, 13, 21, 34, 55, 89, …</strong>  <br />
By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.</p>
</blockquote>

<p>To solve this problem, the pattern of the even numbers in fibonacci sequence need to be understood first. Since the first two numbers of fibonacci sequeunce are odd and even number, so the both third and fourth numbers will be odd numbers because summation of an even and odd number will always be an odd number. After that, these two odd numbers will be resulted in an even number and sequene will go on. In other words, it can be said that each even number will always be surrounded by two consecutive odd numbers and positioned at $ 2k+3 $ for any $k$ in a sequence as shown below:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">O</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">E</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">E</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">E</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">O</th>
      <th style="text-align: center">E</th>
      <th style="text-align: center">..</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">2</td>
      <td style="text-align: center">3</td>
      <td style="text-align: center">5</td>
      <td style="text-align: center">8</td>
      <td style="text-align: center">13</td>
      <td style="text-align: center">21</td>
      <td style="text-align: center">34</td>
      <td style="text-align: center">55</td>
      <td style="text-align: center">89</td>
      <td style="text-align: center">144</td>
      <td style="text-align: center">..</td>
    </tr>
  </tbody>
</table>

<p><br />
Mathematically it can be written in the form of <a href="https://en.wikipedia.org/wiki/Recurrence_relation">recursive relation</a> $f$ where $ n $ is the $nth$ fibonacci number.</p>

\[\begin{align} 
f_{(odd)}(1) &amp;= 1 \\[2ex]
f_{(even)}(2) &amp;= 2 \\[2ex]
\end{align}\]

\[\begin{align} 
f_{(even)}(n) &amp;= f_{(odd)}(n-1) + f_{(odd)}(n-2) \\[2ex]
f_{(odd)}(n) &amp;= f_{(even)}(n-1) + f_{(odd)}(n-2) \text{ or } f_{(odd)}(n-1) + f_{(even)}(n-2) \\[2ex]
\end{align}\]

<p>And then the next even number will be</p>

\[f_{(even)}(n+1) = f_{(odd)}(n) + f_{(odd)}(n-1)\]

<p>The above equation can also be desribed in terms of its relation with its predecessor even fibonacci number, that will save us some iterations in calculating sum. We can do this by expanding the $ f_{(odd)}(n-1) $.</p>

\[\begin{align}
f_{(even)}(n+1) &amp;= f_{(odd)}(n) + ( f_{(odd)}(n) - f_{(even)}(n-2)) \\[2ex]               
f_{(even)}(n+1) &amp;= 2 \times f_{(odd)}(n) - f_{(even)}(n-2) \\[2ex]
\end{align}\]

<p>From the above equation we have everything what we need to calculate sum except $ f_{(odd)}(n) $. Instead what we have is $ f_{(odd)}(n-3) $, that can be used to calculate $ f_{(odd)}(n) $ as shown below.</p>

\[\begin{align} 
f_{(odd)}(n) &amp;= f_{(odd)}(n-1) + f_{(even)}(n-2) \\[2ex]
f_{(odd)}(n) &amp;= (f_{(even)}(n-2) + f_{(odd)}(n-3) ) + f_{(even)}(n-2) \\[2ex]       
f_{(odd)}(n) &amp;= 2 \times f_{(even)}(n-2) + f_{(odd)}(n-3) \\[2ex]
\end{align}\]

<p>And now finally the summation will look like this</p>

\[\sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = \sum_{n=2k+3}^{f(n+1)\le 4000000} 2 \times f(n) - f(n-3)\]

<p>Here $n=2k+3$ means that $(n+1)th$ number will point to the position of even number in fibonacci sequeunce. <em>e.g.</em> 2, 5, 8, 10 ..</p>

<p>Lets calculate the first three even fibonacci numbers to test our equations</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">$k$</th>
      <th style="text-align: center">$n$</th>
      <th style="text-align: center">$f(n)$ odd number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">-</td>
      <td style="text-align: center">-</td>
      <td style="text-align: center">$f(1) = 1 $ <em>(base)</em></td>
    </tr>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">4</td>
      <td style="text-align: center">$f(4)=2 \times f(2) + f(1) = (2 \times 2) + 1 = 5 $</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">7</td>
      <td style="text-align: center">$f(7)=2 \times f(5) + f(4) = (2 \times 8) + 5 = 21 $</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">9</td>
      <td style="text-align: center">$f(9)=2 \times f(8) + f(7) = (2 \times 34) + 21 = 89 $</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">$k$</th>
      <th style="text-align: center">$n$</th>
      <th style="text-align: center">$f(n+1)$ even number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">-</td>
      <td style="text-align: center">-</td>
      <td style="text-align: center">$ f(2) = 2 $ <em>(base)</em></td>
    </tr>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">4</td>
      <td style="text-align: center">$ f(5)=2 \times f(4) - f(2) = (2 \times 5) - 2 = 8 $</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">7</td>
      <td style="text-align: center">$ f(8)=2 \times f(7) - f(5) = (2 \times 21) - 8 = 34 $</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">9</td>
      <td style="text-align: center">$ f(10)=2 \times f(9) - f(8) = (2 \times 89) - 34 = 144 $</td>
    </tr>
  </tbody>
</table>

<p><br />
Here is the complete solution in Python</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># recurrence base condition
</span><span class="n">odd</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">even</span> <span class="o">=</span> <span class="mi">2</span>
<span class="c1"># initialize sum to zero
</span><span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># loop until even number is less than or equal to 4 million 
</span><span class="k">while</span> <span class="n">even</span> <span class="o">&lt;=</span> <span class="mi">4000000</span><span class="p">:</span>
    <span class="c1"># add even number to sum
</span>    <span class="nb">sum</span> <span class="o">+=</span> <span class="n">even</span>
    <span class="c1"># calculate next odd number and even number and
</span>    <span class="c1"># reassign those values to existing variables
</span>    <span class="n">odd</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">even</span> <span class="o">+</span> <span class="n">odd</span>
    <span class="n">even</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">odd</span> <span class="o">-</span> <span class="n">even</span>   
        
<span class="c1"># print sum to the screen
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">sum=</span><span class="sh">"</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
</code></pre></div></div>
<p>And the result is:</p>

\[\sum_{n=2k+3}^{f(n+1)\le 4000000} f(n+1) = 4613732\]

  </div><a class="u-url" href="/2022/09/20/even-fibonacci-numbers.html" hidden></a>
</article>

      </div>
    </main>
</body>

</html>
